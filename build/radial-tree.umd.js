!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3"),require("lodash")):"function"==typeof define&&define.amd?define(["exports","d3","lodash"],t):t(e.wb={},e.d3,e._)}(this,function(e,t,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n,e.RadialTree=function(e,r,a){var i=0,l="https://web.archive.org";if(void 0!==a.baseURL&&(l=a.baseURL),a.url){!function(e){var t=document.createElement("div");t.setAttribute("class","rt-content");var n=document.createElement("div");n.setAttribute("class","div-btn");var r=document.createElement("p");r.setAttribute("class","sequence");var a=document.createElement("div");a.setAttribute("id","chart"),t.appendChild(n),t.appendChild(r),t.appendChild(a),t.style.display="block",e.appendChild(t)}(e);var o=function(e,t){if(e.replace(/http:\/\//,""),e.replace(/https:\/\//,""),e.replace(/\/$/,""),0===t.length)return{allYears:[],yearData:[]};for(var r=[],a=1;a<t.length;a++)t[a][1].match(/jpg|pdf|png|form|gif/)||(t[a][1]=t[a][1].trim().replace(":80/","/"),t[a][0]in r?r[t[a][0]].push(t[a][1]):r[t[a][0]]=[t[a][1]]);var i=[];for(var l in r)i.push([l].concat(r[l]));var o=function(){for(var e=0;e<i.length;e++){for(var t=[],r=1;r<i[e].length;r++){var a=void 0;i[e][r].includes("http")?a=i[e][r].substring(7):i[e][r].includes("https")&&(a=i[e][r].substring(8)),a.includes("//")&&(a=a.split("//").join("/")),a=a.split("/").join("/"),t.push(a)}(t=n.uniq(t.sort())).unshift(i[e][0]),i[e]=t}return i}();return{allYears:o.map(function(e){if(e.length>1)return e[0]}),yearData:o}}(a.url,r);!function(e,n,r,a){var o=e.querySelector(".div-btn");e.querySelector(".year-btn")||r.forEach(function(s,c){var u=document.createElement("button");u.setAttribute("class","year-btn"),u.setAttribute("id",r[c]),u.innerHTML=r[c],u.onclick=function(o){var s=o.target;e.querySelector(".active-btn")&&e.querySelector(".active-btn").classList.remove("active-btn"),s.classList.add("active-btn"),i=s.id;var c=function(e,t){var n="",r=2;2===t[e].length&&(r=1);for(var a=r;a<t[e].length;a++)n=a!==t[e].length-1?n+t[e][a]+" ,1\n":n+t[e][a]+" ,1";return n}(r.indexOf(s.id),a);!function(e,n,r){function a(e){return t.event.preventDefault(),t.event.stopPropagation(),s(e),!1}function o(e){for(var t=e.ancestors().reverse(),n="",r=1;r<t.length&&"end"!==t[r].data.name;r++)n=n+"/"+t[r].data.name;return l+"/web/"+i+"0630"+n}function s(n){var r=n.ancestors().reverse();r.shift();var a=o(n);!function(t,n){var r="",a=document.createElement("span");a.setAttribute("class","symb"),a.innerHTML="/";for(var i=0;i<t.length;i++)r=0===i?" "+t[i].data.name:r+a.innerHTML+t[i].data.name;r=decodeURIComponent(r),e.querySelector(".sequence").innerHTML='<a href="'+n+'">'+r+"</a>"}(r,a),t.selectAll("path").style("opacity",.3),p.selectAll("path").filter(function(e){return r.indexOf(e)>=0}).style("opacity",1)}function c(){e.querySelector(".sequence").innerHTML="",t.selectAll("path").on("mouseover",null),t.selectAll("path").transition().style("opacity",1).on("end",function(){t.select(this).on("mouseover",s)})}e.querySelector(".sequence").innerHTML="",e.querySelector("#chart").innerHTML="";var u=e.querySelector("#chart").offsetWidth,d=u,f=Math.min(u,d)/2,h=t.scaleOrdinal(t.schemeCategory20b),p=t.select("#chart").append("svg:svg").attr("width",u).attr("height",d).append("svg:g").attr("id","d3_container").attr("transform","translate("+u/2+","+d/2+")"),v=t.partition().size([2*Math.PI,f*f]),g=t.arc().startAngle(function(e){return e.x0}).endAngle(function(e){return e.x1}).innerRadius(function(e){return Math.sqrt(e.y0)}).outerRadius(function(e){return Math.sqrt(e.y1)});!function(e){p.append("svg:circle").attr("r",f).style("opacity",0);var n=t.hierarchy(e).sum(function(e){return e.size}).sort(function(e,t){return t.value-e.value}),r=v(n).descendants();p.data([e]).selectAll("path").data(r).enter().append("a").attr("xlink:href",o).on("touchstart",a).append("svg:path").attr("display",function(e){return e.depth?null:"none"}).attr("d",g).attr("fill-rule","evenodd").style("fill",function(e){return"end"===e.data.name?"#000000":h((e.children?e:e.parent).data.name)}).style("opacity",1).style("cursor","pointer").on("mouseover",s),t.select("#d3_container").on("mouseleave",c)}(function(e){function t(e){for(var t=e.trim().split("/"),n=[],a=1;a<t.length;a++){var i=t.slice(0,a).join("/");if(i in r==0&&a>0){var o=t.slice(0,a).join("/").length;n.push(o)}}if(n.length>0){for(var s=e,c=1;c<n.length;c++){var u=n[c];s=s.substr(0,u)+l+s.substr(u+1)}return s}return e}e.sort(function(e,t){return e[0].length-t[0].length||e[0].localeCompare(t[0])});var r={};r[n.url]=1,"/"!==n.url.slice(-1)&&(r[n.url+"/"]=1);for(var a=0;a<e.length;a++){var i=String(e[a][0]).trim().replace(":80/","/");r[i]=1,"/"!==i.slice(-1)&&(r[i+"/"]=1)}for(var l="|",o={name:"root",children:[]},s=0;s<e.length;s++){var c=t(e[s][0]),u=+e[s][1];if(!isNaN(u)){var d=c.split("/");d=d.map(function(e){return e.replace(/\|/g,"/")});for(var f=o,h=0;h<d.length;h++){var p=f.children,v=d[h],g=void 0;if(h+1<d.length){for(var m=!1,y=0;y<p.length;y++)if(p[y].name===v){g=p[y],m=!0;break}m||(g={name:v,children:[]},p.push(g)),f=g}else g={name:v,size:u},p.push(g)}}}return o}(t.csvParseRows(r)))}(e,n,c)},o.appendChild(u),r.length>=2?c===r.length-2&&u.click():c===r.length-1&&u.click()})}(e,a,o.allYears,o.yearData)}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=radial-tree.umd.js.map
